(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9251],{3126:function(e){var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"==t.call(e)}},5279:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/dashboard/custom-request",function(){return s(516)}])},8559:function(e,t,s){"use strict";s.d(t,{M:function(){return u}});var a=s(5893),r=s(7294),n=s(4080),i=s(6245);let l=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"}))});var o=s(7495),c=s(1163);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function u(e){let{isOpen:t,setIsOpen:s}=e,u=(0,c.useRouter)();return(0,a.jsx)(n.u.Root,{show:t,as:r.Fragment,appear:!0,children:(0,a.jsxs)(i.V,{as:"div",className:"relative z-10",onClose:s,children:[(0,a.jsx)(n.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto p-4 sm:p-6 md:p-20",children:(0,a.jsx)(n.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsx)(i.V.Panel,{className:"mx-auto max-w-3xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all",children:(0,a.jsx)("div",{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-start border-b border-gray-200 bg-white px-4 py-5 sm:px-6",children:[(0,a.jsx)(l,{className:"h-6 w-6 text-orange-600","aria-hidden":"true"}),"\xa0",(0,a.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Paid feature"})]}),(0,a.jsxs)("div",{className:"flex divide-x divide-gray-100",children:[(0,a.jsx)("div",{className:"hidden h-96 w-1/2 flex-none flex-col divide-y divide-gray-100 overflow-y-auto sm:flex",children:(0,a.jsxs)("div",{className:"flex flex-auto flex-col justify-around p-6",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:(0,a.jsx)(o.Z,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Credit card required"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"You are accessing one of Kalygo's paid features. We offer several pricing plans including a pay-per-use option and a monthly subscription."})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{u.push("/dashboard/settings#payment-section")},className:"mt-6 w-full rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:"Sign up"})]})}),(0,a.jsx)("div",{className:d("max-h-96 min-w-0 flex-auto scroll-py-4 overflow-y-auto px-6 py-4"),children:(0,a.jsxs)("div",{className:"h-full flex flex-auto flex-col justify-around items-center p-6",children:[(0,a.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Referral Program"}),(0,a.jsx)("h2",{className:"mb-4 mt-2 text-xs text-center text-gray-500",children:"Share a Kalygo referral link with your friends to win usage credits when they sign up with a paid account"}),(0,a.jsx)("div",{className:"-mx-2 text-sm text-gray-700",children:(0,a.jsx)("div",{className:d("flex cursor-default select-none items-center rounded-md p-2"),children:(0,a.jsx)("div",{className:"flex justify-center font-semibold items-center gap-6",children:"Coming Soon!"})})})]})})]})]})})})})})]})})}},516:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return q},default:function(){return S}});var a=s(5893),r=s(9008),n=s.n(r),i=s(1163),l=s(5423),o=s(7765),c=s(5558),d=s(7294),u=s(5362),m=s(798),f=s(9906);s(3159),s(6196);var p=s(6126),x=s(6154),h=s(9196);async function g(e,t){try{console.log("fileList",t);let s=new FormData,a=Object.keys(t);for(let e=0;e<a.length;e++)console.log(t,t[e]),s.append("documents",t[e]);return s.set("customPrompt",e),(0,x.Z)({method:"post",url:"".concat("https://api.kalygo.io","/api/v1/custom-request"),headers:{"Content-Type":"multipart/form-data"},data:s,onUploadProgress:e=>{console.log("onUploadProgress",e)},withCredentials:!0})}catch(e){console.error(e),(0,f.Jc)("Error occurred when executing custom request"),(0,h.D)(e)}}var v=s(9208),b=s.n(v),y=s(3126),j=s.n(y),w=s(7536),N=s(1972);function k(e){let{onError:t,setShowPaymentMethodRequiredModal:s}=e,[r,n]=(0,d.useState)(!1),[l,o]=(0,d.useState)(),[x,h]=(0,d.useState)(),v=(0,i.useRouter)(),{t:y}=(0,c.$G)(),{register:k,handleSubmit:E,getValues:R,formState:{errors:C},setValue:q,watch:S}=(0,w.cI)({defaultValues:{prompt:"","files-to-upload":null}}),D=d.useRef(null),T=async e=>{try{console.log("customRequest submit",e);let t=g(e.prompt,e["files-to-upload"]),s=await t;console.log("customRequestResponse",s);let a=(0,p.o)();v.push("/".concat(a,"/dashboard/queue")),(0,f.Rr)(y("toast-messages:custom-request-is-processing"))}catch(e){(0,f.Jc)(e.toString())}},_=function(e){var t,s;e.preventDefault(),e.stopPropagation(),("dragenter"===e.type||"dragover"===e.type)&&["application/pdf","text/plain"].includes(null===(t=null===(s=e.dataTransfer)||void 0===s?void 0:s.items["0"])||void 0===t?void 0:t.type)?n(!0):"dragleave"===e.type&&n(!1)},M=async function(e){var t,a;if(e.preventDefault(),e.stopPropagation(),n(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&["application/pdf","text/plain"].includes(null===(t=null===(a=e.dataTransfer)||void 0===a?void 0:a.items["0"])||void 0===t?void 0:t.type)){let t=(0,N.r)(),a=await t;console.log("*** paymentMethodsResponse ***",a),j()(b()(a,"data.customRequestCredits"))&&b()(a,"data.customRequestCredits")>0||b()(a,"data.stripeDefaultSource")?o(e.dataTransfer.files):(console.log("PAYMENT REQUIRED"),s(!0))}},F=async function(e){if(e.preventDefault(),e.target.files&&e.target.files[0]){let t=(0,N.r)(),a=await t;console.log("paymentMethodsResponse",a),j()(b()(a,"data.customRequestCredits"))&&b()(a,"data.customRequestCredits")>0||b()(a,"data.stripeDefaultSource")?(o(e.target.files),q("files-to-upload",e.target.files)):(console.log("PAYMENT REQUIRED"),s(!0))}};return(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,a.jsx)("div",{className:"col-span-full flex justify-center",children:(0,a.jsxs)("form",{id:"custom-request-on-files-form",onDragEnter:_,onSubmit:E(T),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium leading-6 text-gray-900",children:y("dashboard-page:custom-request.prompt")}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("textarea",{tabIndex:0,...k("prompt",{required:!0}),placeholder:y("dashboard-page:custom-request.prompt-placeholder-text"),rows:4,name:"prompt",id:"prompt",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"})})]}),l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("ul",{className:"p-4 sm:p-6 lg:p-8",children:Object.keys(l).map((e,t)=>(0,a.jsxs)("li",{children:[t," - ",l[t].name]},t))}),(0,a.jsxs)("button",{onClick:()=>{o(null),q("files-to-upload",null)},type:"button",className:"inline-flex items-center gap-x-2 rounded-md bg-white m-1 px-3.5 py-2.5 text-sm font-semibold text-black shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600",children:[y("dashboard-page:summarize.clear"),(0,a.jsx)(u.Z,{className:"-mr-0.5 h-5 w-5","aria-hidden":"true"})]})]}):(0,a.jsx)("div",{id:"label-file-upload",className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 ".concat(r?"drag-active":""),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Z,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),(0,a.jsx)("div",{className:"mt-4 flex items-center justify-center text-sm leading-6 text-gray-600",children:(0,a.jsxs)("label",{htmlFor:"files-to-upload",className:"relative cursor-pointer rounded-md font-semibold text-blue-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2 hover:text-blue-500",children:[(0,a.jsx)("span",{children:y("dashboard-page:custom-request.select-files")}),(0,a.jsx)("input",{tabIndex:1,...k("files-to-upload",{required:!0}),ref:D,type:"file",id:"files-to-upload",multiple:!0,onChange:F,accept:".pdf,.txt",className:"sr-only"})]})}),r&&(0,a.jsx)("div",{id:"drag-file-element",onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:M}),(0,a.jsx)("p",{className:"text-xs leading-5 text-gray-600",children:y("dashboard-page:custom-request.upload-limits")})]})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{tabIndex:2,className:"mt-2 flex w-full justify-center rounded-md bg-orange-400 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:y("dashboard-page:custom-request.run")})})]})})})})}function E(){return(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 text-center",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-red-600",children:"500"}),(0,a.jsx)("h1",{className:"mt-4 text-3xl font-bold tracking-tight text-gray-900 sm:text-5xl",children:"Error"}),(0,a.jsx)("p",{className:"mt-6 text-base leading-7 text-gray-600",children:"An error occurred."}),(0,a.jsx)("div",{className:"mt-10 flex items-center justify-center gap-x-6",children:(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"rounded-md bg-orange-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Retry"})})]})}var R=s(6542),C=s(8559),q=!0;function S(){let{state:e,dispatch:t}=(0,l.b)();(0,i.useRouter)();let{t:s}=(0,c.$G)(),[r,u]=(0,d.useState)({val:null,loading:!0,err:null});(0,d.useEffect)(()=>{!async function(){let e=await x.Z.get("".concat("https://api.kalygo.io","/api/v1/account"),{withCredentials:!0});u({loading:!1,val:e.data,err:null})}()},[]);let[m,f]=(0,d.useState)({val:null,loading:!1,err:null}),[p,h]=(0,d.useState)(!1),g=null;return g=m.loading?(0,a.jsx)(R.z,{}):m.err?(0,a.jsx)(E,{}):p?(0,a.jsx)(C.M,{isOpen:p,setIsOpen:e=>{h(e)}}):(0,a.jsx)(k,{setShowPaymentMethodRequiredModal:e=>{h(e)},onError:e=>{f({val:null,loading:!1,err:e}),console.log("onError")}}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:s("seo:dashboard-page-seo-meta-title")})}),(0,a.jsx)(o.Z,{account:r.val,children:(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,a.jsx)("div",{className:"sm:flex sm:items-center",children:(0,a.jsx)("div",{className:"sm:flex-auto",children:(0,a.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:s("dashboard-page:custom-request.title")})})}),g]})})]})}S.requireAuth=!0},1972:function(e,t,s){"use strict";s.d(t,{r:function(){return n}});var a=s(9196),r=s(6154);async function n(){try{return(0,r.Z)({method:"get",url:"".concat("https://api.kalygo.io","/api/v1/account/get-account-payment-methods"),headers:{"Content-Type":"application/json"},data:{},withCredentials:!0})}catch(e){(0,a.D)(e)}}},9906:function(e,t,s){"use strict";s.d(t,{Jc:function(){return a.J},Rr:function(){return r.R}});var a=s(6133),r=s(8928);s(5678)},3159:function(){},6196:function(){},7495:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"}))});t.Z=r},798:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"}))});t.Z=r},5362:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))});t.Z=r}},function(e){e.O(0,[5675,1664,5912,4165,820,7536,9208,7765,9774,2888,179],function(){return e(e.s=5279)}),_N_E=e.O()}]);