(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2270],{3126:function(e){var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"==t.call(e)}},8594:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/dashboard/summarize",function(){return a(8461)}])},8559:function(e,t,a){"use strict";a.d(t,{M:function(){return u}});var n=a(5893),r=a(7294),i=a(4080),o=a(6245);let s=r.forwardRef(function({title:e,titleId:t,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"}))});var l=a(7495),c=a(1163);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function u(e){let{isOpen:t,setIsOpen:a}=e,u=(0,c.useRouter)();return(0,n.jsx)(i.u.Root,{show:t,as:r.Fragment,appear:!0,children:(0,n.jsxs)(o.V,{as:"div",className:"relative z-10",onClose:a,children:[(0,n.jsx)(i.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity"})}),(0,n.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto p-4 sm:p-6 md:p-20",children:(0,n.jsx)(i.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsx)(o.V.Panel,{className:"mx-auto max-w-3xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all",children:(0,n.jsx)("div",{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-start border-b border-gray-200 bg-white px-4 py-5 sm:px-6",children:[(0,n.jsx)(s,{className:"h-6 w-6 text-orange-600","aria-hidden":"true"}),"\xa0",(0,n.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Paid feature"})]}),(0,n.jsxs)("div",{className:"flex divide-x divide-gray-100",children:[(0,n.jsx)("div",{className:"hidden h-96 w-1/2 flex-none flex-col divide-y divide-gray-100 overflow-y-auto sm:flex",children:(0,n.jsxs)("div",{className:"flex flex-auto flex-col justify-around p-6",children:[(0,n.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:(0,n.jsx)(l.Z,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,n.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Credit card required"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"You are accessing one of Kalygo's paid features. We offer several pricing plans including a pay-per-use option and a monthly subscription."})})]}),(0,n.jsx)("button",{type:"button",onClick:()=>{u.push("/dashboard/settings#payment-section")},className:"mt-6 w-full rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:"Sign up"})]})}),(0,n.jsx)("div",{className:d("max-h-96 min-w-0 flex-auto scroll-py-4 overflow-y-auto px-6 py-4"),children:(0,n.jsxs)("div",{className:"h-full flex flex-auto flex-col justify-around items-center p-6",children:[(0,n.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Referral Program"}),(0,n.jsx)("h2",{className:"mb-4 mt-2 text-xs text-center text-gray-500",children:"Share a Kalygo referral link with your friends to win usage credits when they sign up with a paid account"}),(0,n.jsx)("div",{className:"-mx-2 text-sm text-gray-700",children:(0,n.jsx)("div",{className:d("flex cursor-default select-none items-center rounded-md p-2"),children:(0,n.jsx)("div",{className:"flex justify-center font-semibold items-center gap-6",children:"Coming Soon!"})})})]})})]})]})})})})})]})})}},8461:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return S},default:function(){return P}});var n=a(5893),r=a(9008),i=a.n(r),o=a(1163),s=a(5423),l=a(7765),c=a(5558),d=a(7294),u=a(6154),m=a(9906);async function f(e,t,a){try{let n=await (0,u.Z)({method:"post",url:"".concat("https://api.kalygo.io","/api/v1/summarize"),headers:{"Content-Type":"application/json"},data:{files:e,amount:t},onUploadProgress:e=>{console.log("onUploadProgress",e)},withCredentials:!0});a(n,null)}catch(e){a(null,e),console.error(e),(0,m.Jc)("Error occurred when performing summarization")}}let p=d.forwardRef(function({title:e,titleId:t,...a},n){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},a),e?d.createElement("title",{id:t},e):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15m0-3l-3-3m0 0l-3 3m3-3V15"}))});var h=a(5362),x=a(798),g=a(9208),v=a.n(g);async function b(e,t){try{console.log("fileList",e);let a=new FormData,n=Object.keys(e);for(let t=0;t<n.length;t++)console.log(e,e[t]),a.append("documents",e[t]);console.log("formData",a),console.log("formData",a.get("documents"));let r=await (0,u.Z)({method:"post",url:"".concat("https://api.kalygo.io","/api/v1/get-summarization-quote"),headers:{"Content-Type":"multipart/form-data"},data:a,onUploadProgress:e=>{console.log("onUploadProgress",e)},withCredentials:!0});console.log("getSummarizationQuote",r),t(v()(r,"data.quote"),v()(r,"data.files"))}catch(e){console.error(e),(0,m.Jc)("Error occurred when retrieving summarization quote")}}a(3159),a(6196);var y=a(9299);function w(e){return new Promise((t,a)=>{try{switch(e&&e.type){case"application/pdf":let n=new FileReader;n.addEventListener("loadend",async()=>{let a=y.getDocument(n.result);a.promise.then(async function(a){let n=a.numPages;for(var r=[],i=1;i<=n;i++){var o=a.getPage(i);r.push(o.then(function(e){return e.getTextContent().then(function(e){return e.items.map(function(e){return e.str}).join("")})}))}let s=await Promise.all(r).then(function(e){return e.join("")});console.log("file",e);let l=new Blob([s],{type:"text/plain"}),c=new File([l],"".concat(e.name,".txt"),{type:"text/plain"});t(c)})}),n.readAsDataURL(e);break;case"text/plain":t(e);break;default:a("Unsupported file type")}}catch(e){a(e)}})}var j=a(6126),N=a(1972),k=a(3126),E=a.n(k);function C(e){let{onError:t,setShowPaymentMethodRequiredModal:a}=e,[r,i]=(0,d.useState)(!1),[s,l]=(0,d.useState)(),[u,g]=(0,d.useState)(),y=(0,o.useRouter)(),{t:k}=(0,c.$G)(),C=d.useRef(null),R=function(e){var t,a;e.preventDefault(),e.stopPropagation(),("dragenter"===e.type||"dragover"===e.type)&&["application/pdf","text/plain"].includes(null===(t=null===(a=e.dataTransfer)||void 0===a?void 0:a.items["0"])||void 0===t?void 0:t.type)?i(!0):"dragleave"===e.type&&i(!1)},z=async function(e){var t,n;if(e.preventDefault(),i(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&["application/pdf","text/plain"].includes(null===(t=null===(n=e.dataTransfer)||void 0===n?void 0:n.items["0"])||void 0===t?void 0:t.type)){let t=await w(e.dataTransfer.files[0]),n=(0,N.r)(),r=await n;console.log("paymentMethodsResponse",r),E()(v()(r,"data.summaryCredits"))&&v()(r,"data.summaryCredits")>0||v()(r,"data.stripeDefaultSource")?(l([t]),b([t],(e,t)=>{g({quote:e,files:t}),(0,m.Rr)("".concat(k("dashboard-page:summarize.received-quote")," (").concat(e,")"))})):(console.log("PAYMENT REQUIRED"),a(!0))}},D=async function(e){if(e.preventDefault(),e.target.files&&e.target.files[0]){let t=(0,N.r)(),n=await t;if(console.log("paymentMethodsResponse",n),E()(v()(n,"data.summaryCredits"))&&v()(n,"data.summaryCredits")>0||v()(n,"data.stripeDefaultSource")){l(e.target.files);let t=await w(e.target.files[0]);b([t],(e,t)=>{g({quote:e,files:t}),(0,m.Rr)("".concat(k("dashboard-page:summarize.received-quote")," (").concat(e,")"))})}else console.log("PAYMENT REQUIRED"),a(!0)}};return(0,n.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:s?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsx)("ul",{className:"p-4 sm:p-6 lg:p-8",children:Object.keys(s).map((e,t)=>(0,n.jsxs)("li",{children:[t," - ",s[t].name]},t))}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{onClick:()=>{console.log("Summarize"),console.log("quoteForFiles",u),f(u.files,(null==u?void 0:u.quote)*100,(e,a)=>{if(a){t(a);return}let n=(0,j.o)();y.push("/".concat(n,"/dashboard/queue")),(0,m.Rr)(k("toast-messages:files-uploaded-for-summarization-complete"))})},type:"button",className:"inline-flex items-center gap-x-2 rounded-md bg-blue-600 m-1 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:[k("dashboard-page:summarize.summarize")," ",(null==u?void 0:u.quote)&&"(".concat(null==u?void 0:u.quote,")"),(0,n.jsx)(p,{className:"-mr-0.5 h-5 w-5","aria-hidden":"true"})]}),(0,n.jsxs)("button",{onClick:()=>{l(null)},type:"button",className:"inline-flex items-center gap-x-2 rounded-md bg-orange-400 m-1 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[k("dashboard-page:summarize.clear"),(0,n.jsx)(h.Z,{className:"-mr-0.5 h-5 w-5","aria-hidden":"true"})]})]})]}):(0,n.jsx)("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,n.jsx)("div",{className:"col-span-full flex justify-center",children:(0,n.jsx)("form",{id:"form-file-upload",onDragEnter:R,onSubmit:e=>e.preventDefault(),children:(0,n.jsx)("div",{id:"label-file-upload",className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 ".concat(r?"drag-active":""),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(x.Z,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),(0,n.jsx)("div",{className:"mb-2 mt-2 flex items-center justify-center text-sm leading-6 text-gray-600",children:(0,n.jsx)("label",{htmlFor:"input-file-upload",className:"relative cursor-pointer rounded-md font-semibold text-blue-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2 hover:text-blue-500",children:(0,n.jsxs)("button",{type:"button",className:"rounded bg-blue-600 px-2 py-2 text-xs font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>{var e;null===(e=C.current)||void 0===e||e.click()},children:[k("dashboard-page:summarize.upload-a-file"),(0,n.jsx)("input",{ref:C,type:"file",id:"input-file-upload",multiple:!0,onChange:D,accept:".pdf,.txt",className:"sr-only"})]})})}),r&&(0,n.jsx)("div",{id:"drag-file-element",onDragEnter:R,onDragLeave:R,onDragOver:R,onDrop:z}),(0,n.jsx)("p",{className:"text-xs leading-5 text-gray-600",children:k("dashboard-page:summarize.upload-limits")})]})})})})})})}function R(){return(0,n.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 text-center",children:[(0,n.jsx)("p",{className:"text-base font-semibold text-red-600",children:"500"}),(0,n.jsx)("h1",{className:"mt-4 text-3xl font-bold tracking-tight text-gray-900 sm:text-5xl",children:"Error"}),(0,n.jsx)("p",{className:"mt-6 text-base leading-7 text-gray-600",children:"An error occurred."}),(0,n.jsx)("div",{className:"mt-10 flex items-center justify-center gap-x-6",children:(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"rounded-md bg-orange-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Retry"})})]})}var z=a(6542),D=a(8559),S=!0;function P(){let{state:e,dispatch:t}=(0,s.b)();(0,o.useRouter)();let{t:a}=(0,c.$G)(),[r,m]=(0,d.useState)({val:null,loading:!0,err:null});(0,d.useEffect)(()=>{!async function(){let e=await u.Z.get("".concat("https://api.kalygo.io","/api/v1/account"),{withCredentials:!0});m({loading:!1,val:e.data,err:null})}()},[]);let[f,p]=(0,d.useState)({val:null,loading:!1,err:null}),[h,x]=(0,d.useState)(!1),g=null;return g=f.loading?(0,n.jsx)(z.z,{}):f.err?(0,n.jsx)(R,{}):h?(0,n.jsx)(D.M,{isOpen:h,setIsOpen:e=>{x(e)}}):(0,n.jsx)(C,{setShowPaymentMethodRequiredModal:e=>{x(e)},onError:e=>{p({val:null,loading:!1,err:e}),console.log("onError")}}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:a("seo:dashboard-page-seo-meta-title")})}),(0,n.jsx)(l.Z,{account:r.val,children:g})]})}P.requireAuth=!0},1972:function(e,t,a){"use strict";a.d(t,{r:function(){return i}});var n=a(9196),r=a(6154);async function i(){try{return(0,r.Z)({method:"get",url:"".concat("https://api.kalygo.io","/api/v1/account/get-account-payment-methods"),headers:{"Content-Type":"application/json"},data:{},withCredentials:!0})}catch(e){(0,n.D)(e)}}},9906:function(e,t,a){"use strict";a.d(t,{Jc:function(){return n.J},Rr:function(){return r.R}});var n=a(6133),r=a(8928);a(5678)},3159:function(){},6196:function(){},7495:function(e,t,a){"use strict";var n=a(7294);let r=n.forwardRef(function({title:e,titleId:t,...a},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"}))});t.Z=r},798:function(e,t,a){"use strict";var n=a(7294);let r=n.forwardRef(function({title:e,titleId:t,...a},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"}))});t.Z=r},5362:function(e,t,a){"use strict";var n=a(7294);let r=n.forwardRef(function({title:e,titleId:t,...a},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))});t.Z=r}},function(e){e.O(0,[5675,1664,5912,4165,820,9208,7765,9774,2888,179],function(){return e(e.s=8594)}),_N_E=e.O()}]);